---
phase: 11-interpretation-guide-context-injection
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - "~/.claude/skills/natal-chart/SKILL.md"
autonomous: true

must_haves:
  truths:
    - "Current transits auto-load when a chart profile is opened or created"
    - "A predictive interpretation guide covering transits, progressions, and solar arcs is injected into Claude's context on skill invocation"
    - "Combined natal + transit data loads in a single operation (Read chart.json + Bash --transits)"
    - "Skill routes targeted predictive queries (transits, timeline, progressions, solar arcs) to correct CLI flags"
  artifacts:
    - path: "~/.claude/skills/natal-chart/SKILL.md"
      provides: "Extended skill with predictive routing, auto-load transits, and predictive interpretation guide"
      contains: "Predictive Mode"
  key_links:
    - from: "SKILL.md predictive routing section"
      to: "backend CLI flags (--transits, --timeline, --progressions, --solar-arcs)"
      via: "Bash tool invocations with correct flag mapping"
      pattern: "--transits|--timeline|--progressions|--solar-arcs"
    - from: "SKILL.md Context Loading section"
      to: "backend --transits SLUG"
      via: "Auto-load step after Read chart.json"
      pattern: "--transits.*slug"
    - from: "SKILL.md interpretation guide"
      to: "transit/progression/solar arc JSON field paths"
      via: "Field path references in guide text"
      pattern: "transit_aspects|progressed_planets|directed_planets"
---

<objective>
Extend the natal-chart SKILL.md with predictive mode routing, auto-load transits on chart open, and an expert interpretation guide covering transits, progressions, solar arcs, and timelines.

Purpose: Phase 11 completes the skill layer for v1.1. All backend predictive modes (Phases 7-10) are implemented but inaccessible through the skill. This plan wires them into the skill's routing, auto-loads transits for immediate context, and provides Claude with the interpretive framework to answer predictive questions with the same depth as natal questions.

Output: Updated SKILL.md (~600-700 lines) with three new sections: Predictive Mode routing, updated Context Loading with transit auto-load, and Predictive Interpretation Guide.
</objective>

<execution_context>
@C:/Users/faisa/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/faisa/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-interpretation-guide-context-injection/11-RESEARCH.md
@.planning/phases/06-context-loading-interpretation/06-01-SUMMARY.md
@C:/Users/faisa/.claude/skills/natal-chart/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend SKILL.md with predictive routing, auto-load transits, and interpretation guide</name>
  <files>~/.claude/skills/natal-chart/SKILL.md</files>
  <action>
Read the current SKILL.md (384 lines). Make three additions:

**A. Update Context Loading section (after existing step 5, before Important Notes)**

Add steps to auto-load transits after chart.json is loaded:

After step 4 ("Important: The chart.json contains..."), add:

6. **Auto-load current transits** via Bash tool:
   ```bash
   cd C:/NEW/backend
   ./venv/Scripts/python astrology_calc.py --transits {slug}
   ```
   The Bash output IS the transit JSON — do NOT attempt to Read a file. Transit data is ephemeral (computed on-demand), not stored on disk.

7. **Parse transit output** to enhance the summary:
   - Count `transit_aspects` array length
   - Note any retrograde transiting planets from `transit_planets`
   - Add to display summary: "Current transits: {N} active aspects"

8. **Combined context now available:**
   ```
   Chart loaded for {name} — Sun in {sign}, Moon in {sign}, {sign} Rising
   Current transits: {N} active transit aspects

   Full natal chart data and current transit snapshot are now in context.
   Ask about natal placements, current transits, or request progressions/solar arcs.
   ```

**B. Add Predictive Mode section (after Name Search Mode, before Context Loading)**

Add a new `## Predictive Mode` section with this content:

When user asks about transits, progressions, solar arcs, or upcoming events for a chart:

1. **Identify profile slug**
   - If chart.json is already loaded in context: use `meta.slug`
   - If not loaded: run `--list` to show profiles, use AskUserQuestion to select one, then load chart.json first via Read tool

2. **Route based on user intent:**

   | User Says | CLI Flag | Example |
   |-----------|----------|---------|
   | "transits", "what's happening now", "current transits" | `--transits SLUG` | `--transits albert-einstein` |
   | "transits on [date]", "transits for March 2026" | `--transits SLUG --query-date YYYY-MM-DD` | `--transits albert-einstein --query-date 2026-03-15` |
   | "upcoming transits", "next 3 months", "timeline" | `--timeline SLUG --range [week\|30d\|3m\|year]` | `--timeline albert-einstein --range 3m` |
   | "transits from X to Y", custom date range | `--timeline SLUG --start YYYY-MM-DD --end YYYY-MM-DD` | `--timeline albert-einstein --start 2026-03-01 --end 2026-06-30` |
   | "progressions", "progressed chart" | `--progressions SLUG` | `--progressions albert-einstein` |
   | "progressions at age N" | `--progressions SLUG --age N` | `--progressions albert-einstein --age 50` |
   | "progressions for [date]" | `--progressions SLUG --target-date YYYY-MM-DD` | `--progressions albert-einstein --target-date 2027-01-01` |
   | "solar arc", "SA directions" | `--solar-arcs SLUG` | `--solar-arcs albert-einstein` |
   | "solar arc at [date/age]" | `--solar-arcs SLUG --target-date YYYY-MM-DD` | `--solar-arcs albert-einstein --target-date 2027-01-01` |
   | "mean arc" or "Naibod" variant | add `--arc-method mean` to any --solar-arcs command | `--solar-arcs albert-einstein --arc-method mean` |

3. **Invoke via Bash tool:**
   ```bash
   cd C:/NEW/backend
   ./venv/Scripts/python astrology_calc.py [FLAGS]
   ```

4. **The Bash output IS the predictive JSON.** Transit, timeline, progression, and solar arc data is printed to stdout. Do NOT attempt to Read a file — treat the Bash command output as the data.

5. **If natal chart is not yet loaded**, load chart.json via Read tool FIRST, then run the predictive mode. Both natal and predictive data should be in context for synthesis.

6. **Display predictive summary** based on mode:
   - Transits: "{N} active transit aspects — [list 2-3 tightest aspects]"
   - Timeline: "{N} exact hit events from {start} to {end}"
   - Progressions: "Progressed Sun in {sign}, progressed Moon in {sign} — {N} progressed aspects"
   - Solar arcs: "SA arc {degrees}° — {N} directed aspects within orb"

**C. Add Predictive Interpretation Guide section (after Ethical Guidelines, at end of file)**

Add a new `## Predictive Interpretation Guide` section covering transit, timeline, progression, and solar arc interpretation. Structure it as follows:

### Predictive Core Principles
1. **Natal Chart is Foundation**: Transits/progressions activate natal potential — they don't create new themes.
2. **Outer Planets = Major Themes**: Saturn, Uranus, Neptune, Pluto transits mark life chapters. Inner planets are daily weather.
3. **Applying vs Separating**: Applying aspects are building (anticipatory); separating aspects are releasing (integrative). Check `movement` field.
4. **Multiple Activations**: When transits, progressions, AND solar arcs all activate the same natal point, the theme is unmistakable.
5. **Orbs Vary by Mode**: Transits use 3/3/2/2/1 (wider = active longer); progressions and solar arcs use 1° (precision timing).

### Transit Snapshot Interpretation
**Data fields:** `transit_planets[]` (name, sign, natal_house, retrograde), `transit_aspects[]` (transit_planet, natal_planet, aspect, orb, movement)

**Interpretation framework:**
- **Transit planet in natal house**: Transiting planet activates that life area. Jupiter in natal 10th = career expansion. Saturn in natal 7th = partnership tests.
- **Transit-to-natal aspects**: The transiting planet's nature interacts with the natal planet's role. Transiting Pluto square natal Moon = emotional transformation pressure.
- **Retrograde transits**: Planet retreats over a natal point — re-examination, revisiting, internalization. Three passes (direct-retrograde-direct) mark the full transit window.
- **Orb significance**: Orbs under 1° are exact or near-exact (strongest). 1-2° is active. 2-3° is approaching/departing.
- **Movement**: Applying = building in intensity. Separating = lessons integrating.

**Transit planet meanings (brief):**
- Sun/Moon/Mercury/Venus/Mars: Daily to weekly rhythms, minor triggers
- Jupiter: Expansion, opportunity, growth (stays in sign ~1 year)
- Saturn: Structure, discipline, limits, maturation (~2.5 years per sign)
- Uranus: Disruption, liberation, breakthrough (~7 years per sign)
- Neptune: Dissolution, spirituality, confusion/inspiration (~14 years per sign)
- Pluto: Transformation, power, death/rebirth (~12-30 years per sign)

### Timeline Interpretation
**Data fields:** `events[]` (date, transit_planet, aspect, natal_planet, orb_at_hit), `meta.start_date`, `meta.end_date`, `meta.event_count`

**Interpretation framework:**
- **Cluster analysis**: Multiple events in a short span = intense period. Spread-out events = steady development.
- **Outer planet hits**: Saturn/Uranus/Neptune/Pluto exact hits are the most significant dates in the timeline.
- **Repeated themes**: Same natal planet hit by multiple transiting planets = that area of life is strongly activated.
- **Sequence reading**: Read events chronologically — earlier transits often set up later ones.

### Secondary Progressions Interpretation
**Data fields:** `progressed_planets[]` (name, sign, house, degree, natal_sign, natal_degree), `progressed_aspects[]` (progressed_planet, natal_planet, aspect, orb, movement), `monthly_moon[]` (month, sign, degree, sign_change, natal_house), `distribution_shift` (elements, modalities with natal/progressed/delta)

**Interpretation framework:**
- **Progressed Sun sign change**: Major identity evolution — happens every ~30 years. Compare progressed sign to natal sign.
- **Progressed Moon cycle**: The Moon progresses through all 12 signs in ~27 years. Current progressed Moon sign = current emotional focus and needs.
- **Monthly Moon positions**: `monthly_moon[]` shows the progressed Moon's journey through the year. Sign changes mark emotional shifts.
- **Progressed-to-natal aspects**: Slow-forming, long-lasting (1° orb = ~1 year active). Progressed Venus conjunct natal MC = year of relationship/career harmony.
- **Distribution shift**: `distribution_shift.elements.{element}.delta` shows how progressed positions change the natal element balance. Increasing Water delta = growing emotional awareness.

### Solar Arc Directions Interpretation
**Data fields:** `directed_planets[]` (name, directed_sign, directed_degree, natal_sign, natal_degree), `aspects[]` (directed_point, natal_point, aspect, orb, movement), `meta.arc_degrees`, `meta.arc_method`

**Interpretation framework:**
- **1 degree = 1 year**: Solar arc timing is the most precise. An aspect with 0.5° orb is within 6 months of exact. `movement: "Applying"` means the event is ahead.
- **SA conjunctions and hard aspects are primary**: Conjunctions, squares, and oppositions are the strongest SA events. Trines and sextiles are supportive but less dramatic.
- **Directed angles (ASC/MC)**: SA-directed ASC or MC hitting a natal planet = major life event involving that planet's themes.
- **Directed outer planets to natal angles**: SA-directed Pluto to natal MC = career transformation. SA-directed Uranus to natal ASC = radical identity change.
- **Arc method**: True arc (default) is more accurate due to seasonal Sun speed variation. Mean arc (Naibod 0.98565°/year) is simpler but slightly less precise.

### Synthesizing Predictive Techniques
When multiple predictive techniques are in context:

1. **Look for convergence**: If transiting Saturn is on natal Moon AND progressed Moon is in Capricorn AND SA Neptune squares natal Moon — emotional/security themes are overwhelmingly activated.
2. **Timing hierarchy**: Solar arcs for precise timing (1° = 1 year), progressions for developmental phases (years), transits for activation triggers (weeks to months for outer planets).
3. **Natal promise first**: A transit can only deliver what the natal chart promises. Jupiter transiting the 10th house brings career opportunity only if the natal 10th house supports career emphasis.

### Answering Predictive Questions

**"What transits are affecting me now?"**
1. Check `transit_aspects[]` — list aspects sorted by orb (tightest first)
2. Prioritize outer planet aspects (Saturn, Uranus, Neptune, Pluto)
3. Note which natal houses transiting planets occupy
4. Check movement (applying = building, separating = integrating)
5. Synthesize with natal chart context (what natal planet is being activated and what does it rule?)

**"What's coming up in the next few months?"**
1. Run `--timeline SLUG --range 3m` (or appropriate range)
2. Identify outer planet exact hits as headline events
3. Look for date clusters (busy periods)
4. Connect each event to natal chart themes
5. Frame as potentials and growth opportunities, not predictions

**"What do my progressions show?"**
1. Note progressed Sun and Moon signs — compare to natal
2. Check progressed-to-natal aspects (1° orb = ~1 year active)
3. Review monthly Moon for emotional trajectory
4. Check distribution shift for evolving temperament
5. Frame as developmental evolution, not sudden events

**"What are my solar arcs saying?"**
1. Check `aspects[]` — SA aspects within 1° are active now
2. Look at `movement` — Applying means the exact hit is ahead
3. Note arc degree (`meta.arc_degrees`) for life stage context
4. Prioritize hard aspects (conjunction, square, opposition)
5. Frame as major life themes unfolding on precise timeline

Keep the total SKILL.md under 700 lines. If it exceeds 700 lines, tighten the predictive interpretation guide by removing the transit planet meanings list (Claude already knows these) and condensing the question templates.

Do NOT modify any existing sections except Context Loading (adding auto-load steps). All original mode routing, error handling, and natal interpretation guide content must remain unchanged.
  </action>
  <verify>
1. Run `wc -l ~/.claude/skills/natal-chart/SKILL.md` — must be between 550 and 700 lines
2. Confirm YAML frontmatter is valid (name, description, allowed-tools present)
3. Search for "Predictive Mode" section heading — must exist
4. Search for "auto-load current transits" or "--transits {slug}" in Context Loading section — must exist
5. Search for "Predictive Interpretation Guide" section heading — must exist
6. Search for "transit_aspects" field path reference in guide — must exist
7. Search for "progressed_planets" field path reference in guide — must exist
8. Search for "directed_planets" field path reference in guide — must exist
9. Confirm all original sections preserved: "Mode Determination", "Create Mode", "List/Load Mode", "Name Search Mode", "Context Loading", "Important Notes", "Astrological Interpretation Guide"
  </verify>
  <done>
SKILL.md extended with: (1) Predictive Mode routing section mapping user intent to --transits, --timeline, --progressions, --solar-arcs CLI flags; (2) Context Loading updated to auto-load transits after chart.json Read via Bash stdout capture; (3) Predictive Interpretation Guide covering transit snapshot, timeline, progressions, solar arcs, synthesis, and question templates — all referencing actual JSON field paths. Total file under 700 lines, all original content preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify skill functionality with backend predictive modes</name>
  <files>~/.claude/skills/natal-chart/SKILL.md</files>
  <action>
End-to-end verification that the updated SKILL.md routing instructions map correctly to working backend modes.

1. **Verify backend modes work** — Run each CLI mode against an existing profile (albert-einstein) and confirm JSON output:
   ```bash
   cd C:/NEW/backend
   ./venv/Scripts/python astrology_calc.py --transits albert-einstein
   ./venv/Scripts/python astrology_calc.py --timeline albert-einstein --range 30d
   ./venv/Scripts/python astrology_calc.py --progressions albert-einstein
   ./venv/Scripts/python astrology_calc.py --solar-arcs albert-einstein
   ```
   All four must exit 0 and produce valid JSON to stdout.

2. **Verify JSON field paths in interpretation guide match actual output:**
   - Transit output must contain: `transit_planets`, `transit_aspects` with fields `transit_planet`, `natal_planet`, `aspect`, `orb`, `movement`
   - Timeline output must contain: `events` with fields `date`, `transit_planet`, `aspect`, `natal_planet`, `orb_at_hit`
   - Progressions output must contain: `progressed_planets`, `progressed_aspects`, `monthly_moon`, `distribution_shift`
   - Solar arcs output must contain: `directed_planets`, `aspects` with fields `directed_point`, `natal_point`, `aspect`, `orb`, `movement`, plus `meta.arc_degrees`

3. **Verify SKILL.md structural integrity:**
   - YAML frontmatter valid
   - All original sections preserved (Mode Determination, Create Mode, List/Load Mode, Name Search Mode, Context Loading, Important Notes, Astrological Interpretation Guide)
   - New sections present (Predictive Mode, Predictive Interpretation Guide)
   - Line count under 700

4. **Spot-check routing table accuracy** — Verify each CLI flag in the routing table matches actual backend argument names by checking `astrology_calc.py` argparse definitions.

If any field path in the interpretation guide does NOT match actual JSON output, fix the guide to use the correct field names.
  </action>
  <verify>
1. All four backend mode commands exit 0
2. JSON field paths in interpretation guide match actual backend output (grep for each referenced field in the command output)
3. `wc -l ~/.claude/skills/natal-chart/SKILL.md` under 700
4. No broken references in SKILL.md (no field paths that don't exist in actual output)
  </verify>
  <done>
All backend predictive modes produce valid JSON matching the field paths documented in SKILL.md's Predictive Interpretation Guide. Routing table CLI flags match actual argparse definitions. SKILL.md is structurally valid with all original and new sections present. File under 700 lines.
  </done>
</task>

</tasks>

<verification>
1. SKILL.md contains "## Predictive Mode" section with routing table for all 4 backend modes
2. SKILL.md Context Loading section includes transit auto-load step via Bash stdout
3. SKILL.md contains "## Predictive Interpretation Guide" with subsections for transit snapshot, timeline, progressions, solar arcs, and synthesis
4. All JSON field path references in guide match actual backend output field names
5. All original SKILL.md content preserved (natal interpretation guide, mode routing, error handling)
6. SKILL.md total line count between 550-700
7. All four backend modes (--transits, --timeline, --progressions, --solar-arcs) work against test profile
</verification>

<success_criteria>
- INTG-01: Context Loading section auto-loads transits after chart.json Read — verified by finding "--transits {slug}" in Context Loading steps
- INTG-02: Predictive Interpretation Guide section exists with transit/progression/solar arc interpretation frameworks referencing actual JSON field paths
- INTG-03: Context Loading produces combined natal + transit data in a single load operation (Read chart.json then Bash --transits)
- INTG-04: Predictive Mode routing table maps user intent keywords to correct CLI flags for all 4 modes (--transits, --timeline, --progressions, --solar-arcs) with date/age variants
</success_criteria>

<output>
After completion, create `.planning/phases/11-interpretation-guide-context-injection/11-01-SUMMARY.md`
</output>
